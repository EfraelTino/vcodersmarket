---
import DemoSection from "@/components/sections/DemoSection.astro";
import Layout from "../layouts/Layout.astro";
import Header from "@/components/ui/Header.astro";
import FormWaitList from "@/components/sections/FormWaitList.astro";
import { iconItems } from "@/components/lib/datas";
import Background from "@/components/ui/Background.astro";
---

<Layout>
  <div class="min-h-screen relative overflow-hidden flex flex-col">
<Background/>

    <Header />

    <main
      class="relative z-10 flex-1 flex flex-col items-center pt-8 md:pt-13 text-center w-full max-w-7xl mx-auto px-4"
    >
      <p
        class="inline-flex items-center mb-4 border border-gray-200 bg-white rounded-full px-1 py-1 pr-3 text-[12px] md:text-[13px] text-gray-600 hover:border-gray-300 transition-all shadow-sm group"
      >
        <span
          class="px-2 py-0.5 rounded-full flex items-center bg-white border border-gray-100 font-medium text-gray-800 mr-2 shadow-sm"
        >
          Beta
        </span>

        <span data-i18n="brand.tagline">
          La primera marketplace para "Vibe Coders"
        </span>

        <span
          class="ml-2 text-gray-400 group-hover:translate-x-0.5 transition-transform"
        >
          ↗
        </span>
      </p>

      <h1
        data-i18n="hero.title"
        class="text-3xl md:text-5xl font-medium tracking-tight text-gray-900 leading-[1.1] mb-6"
      >
        Convierte tus apps de IA en ingresos
      </h1>

      <p
        data-i18n="hero.description"
        class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto"
      >
        VibeMarket es la plataforma moderna para comprar y vender proyectos de
        software generados con IA. No lo guardes, véndelo.
      </p>

      <FormWaitList />
      <div class="flex flex-wrap justify-center gap-2 mb-4 relative z-20">
        {
          iconItems.map((item) => (
            <div class="flex items-center px-2 py-1 bg-white border border-gray-200 rounded-lg text-xs font-semibold text-gray-700 shadow-[0_2px_10px_rgba(0,0,0,0.05)] gap-2 md:text-sm">
              <div
                set:html={item.icon}
                class="w-6 h-6 flex items-center justify-center rounded text-white"
                style={`background-color: ${item.color};`}
              />
              <span data-i18n={`navigation.${item.key}`}>{item.text}</span>
            </div>
          ))
        }
      </div>

      <DemoSection />
    </main>
  </div>
</Layout>



<script is:inline>
  const userLang = navigator.language || navigator.userLanguage;
  if (userLang.startsWith("en")) {
    translatePage();
  }

  async function translatePage() {
    try {
      const response = await fetch("/language.json");
      const data = await response.json();
      const translations = data.language.en;
      const getValue = (path) =>
        path.split(".").reduce((o, i) => o?.[i], translations);
      document.querySelectorAll("[data-i18n]").forEach((el) => {
        const key = el.getAttribute("data-i18n");
        const text = getValue(key);
        if (text) el.innerText = text;
      });
      document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
        const key = el.getAttribute("data-i18n-placeholder");
        const text = getValue(key);
        if (text) el.setAttribute("placeholder", text);
      });
    } catch (error) {
      console.error("Error cargando traducciones:", error);
    }
  }
</script>
